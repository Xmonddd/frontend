<section class="auth-page">
  <div class="card">
    <h1>Sign up</h1>
    <p class="muted">Optional lang ito. Maaari kang gumamit ng app kahit hindi naka-sign up.</p>

    <div class="oauth">
      <button class="oauth-btn google" type="button" (click)="google()">
        <svg width="18" height="18" viewBox="0 0 48 48" aria-hidden="true">
          <path fill="#EA4335" d="M24 9.5c3.9 0 7.4 1.5 10.1 4l7.6-7.6C36.9 1.9 30.8 0 24 0 14.6 0 6.4 5.3 2.5 13l8.9 6.9C13.5 14.3 18.3 9.5 24 9.5z"/>
          <path fill="#4285F4" d="M46.5 24.5c0-1.7-.2-3.3-.6-4.8H24v9.1h12.7c-.5 2.7-2 5-4.2 6.5l6.4 5c3.7-3.4 7.6-9 7.6-15.8z"/>
          <path fill="#FBBC05" d="M11.4 28.9c-.6-1.7-1-3.6-1-5.4s.4-3.7 1-5.4l-8.9-6.9C.9 14.1 0 18 0 23.5S.9 32.9 2.5 37.3l8.9-6.9z"/>
          <path fill="#34A853" d="M24 47c6.5 0 12-2.1 16-5.7l-6.4-5c-2.2 1.5-5 2.4-9.6 2.4-5.8 0-10.6-4.8-12.2-11.1l-8.9 6.9C6.4 42.7 14.6 47 24 47z"/>
        </svg>
        Continue with Google
      </button>
    </div>

    <div class="divider"><span>or</span></div>

    <!-- existing signup form -->
    <form [formGroup]="form" (ngSubmit)="submit()">
      <div class="field">
        <label>Username</label>
        <input type="text" placeholder="yourname" formControlName="username" />
        <div class="err" *ngIf="form.get('username')?.touched && form.get('username')?.invalid">
          Username is required (min 3 chars).
        </div>
      </div>

      <div class="field">
        <label>Password</label>
        <input type="password" placeholder="••••••••" formControlName="password" />
        <div class="err" *ngIf="form.get('password')?.touched && form.get('password')?.invalid">
          Password is required (min 6 chars).
        </div>
      </div>

      <div class="field">
        <label>Confirm password</label>
        <input type="password" placeholder="••••••••" formControlName="confirm" />
        <div class="err" *ngIf="mismatch">Passwords do not match.</div>
      </div>

      <!-- Email moved to bottom (as requested) -->
      <div class="field">
        <label>Email</label>
        <input type="email" placeholder="you@example.com" formControlName="email" />
        <div class="err" *ngIf="form.get('email')?.touched && form.get('email')?.invalid">
          Valid email is required.
        </div>
      </div>

      <button class="btn" type="submit" [disabled]="loading">
        {{ loading ? 'Creating account...' : 'Create account' }}
      </button>

      <div class="err" *ngIf="error">{{ error }}</div>
    </form>

    <div class="divider"><span>or</span></div>

    <!-- Quick signup via magic link (optional, keep if you want) -->
    <form class="magic" [formGroup]="magicForm" (ngSubmit)="sendMagic()">
      <label>Quick signup via email link</label>
      <div class="row">
        <input type="email" placeholder="you@example.com" formControlName="magicEmail" />
        <button class="btn small" type="submit" [disabled]="sendingMagic">
          {{ sendingMagic ? 'Sending...' : 'Send link' }}
        </button>
      </div>
      <div class="info" *ngIf="magicMsg">{{ magicMsg }}</div>
    </form>

    <div class="switch">
      May account na?
      <a [routerLink]="['/login']" [queryParams]="{ redirect: redirectTo }">Login</a>
    </div>
  </div>
</section>